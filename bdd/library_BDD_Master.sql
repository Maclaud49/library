-- ====================================================================================================================
-----------------------------------------------------------------------------------------------------------------------
--
--   Auteur 				: 	Mickael Parlow 
--	 Application			:	MP_library_OC
--   Version application  	: 	01.00
--	 Type BDD 				:	Postgres 
--   Cr√©ation 				: 	22/02/2018
--   Modification 			: 	
--   Description 			: 	Creation base, tablespace, utilisateurs et role,sequences, tables et contraintes
--  
-----------------------------------------------------------------------------------------------------------------------
-- ====================================================================================================================

-- ====================================================================================================================
------------------------------------------------ CREATION ROLE , DATABASE ---------------------------------------------
-- ====================================================================================================================


CREATE ROLE library_user WITH PASSWORD 'library_2018' LOGIN SUPERUSER CREATEROLE INHERIT;
CREATE DATABASE library WITH OWNER = library_user ENCODING = 'UTF8' CONNECTION LIMIT = -1;


-- ====================================================================================================================
------------------------------------------------ CREATION DES TABLES --------------------------------------------------
-- ====================================================================================================================

CREATE TABLE utilisateur(
  id SERIAL PRIMARY KEY,
  pseudo CHARACTER VARYING(30) NOT NULL,
  mdp CHARACTER VARYING(60) NOT NULL,
  email CHARACTER VARYING(60) NOT NULL,
  profil CHARACTER VARYING(20) NOT NULL
);


-- ====================================================================================================================
---------------------------------------------------- DROITS SUR TABLES ------------------------------------------------
-- ====================================================================================================================



GRANT ALL ON TABLE public.utilisateur TO library_user;


GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO library_user;

